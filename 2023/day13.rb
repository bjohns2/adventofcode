test_input = "#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#"

my_input = "######.#.#.
.#..#...###
.####....##
.####..###.
#....##.##.
......#.###
#.##.#.#.##
.####.#..#.
..##....##.
##..##.....
##..##.....
..##....##.
.####.#..#.
#.##.#.#.##
......#.###
#....##..#.
.####..###.

.##..##..##....##
.###....###.##.##
###.#..#.###..###
#...#..#...####..
#.#.#..#.#.####.#
###..##..########
#..#....#..#..#..
..#.####.#..###.#
..########......#
#..##..##..#..#..
#..######..#..#..
####....####..###
.#.##..##.#....#.

.#.####.#..#.#.#.
#...#.###...###.#
..#..#.#.#..#.##.
..#..#.#.#..#.#..
#...#.###...###.#
.#.####.#..#.#.#.
..#.##..###.....#
.###..#.....#####
.###....#.....###
.....##.#...###.#
.###.#...#.##.##.
###...###.#.###..
###...###.#.###..

.#####.#.#.....
##..###.#...##.
##...####....##
####.#..#.##.##
####.#..#.##.##
##...####....##
##..###.#...##.
.#####.#.##....
####..#..##.##.
#..#..#########
##.#####.#.#...
.#.##.#.#..####
##..#####....#.
..#.#.##..#....
..#.#.##..#....

#..##..
##..#..
#.#####
....#..
.#..###
.#..###
....#..
#.#####
##..#..
#..##..
...##..
###..##
...###.
..#.#..
....###
##.#...
.##..##

.#..#.#..#.#.
#.##.######.#
##..##....##.
.##.#.####.#.
..##........#
######.##.###
##..########.
##..########.
.......##....
#....##..##..
......####...

.#..#####
.#..####.
.######..
..#.###..
##.##.#..
#.###.##.
####.#.##
..##...#.
#.####..#
#.#.#....
.#.#....#
######...
######...
.#.#....#
#.#.#....

#...##..####.
#.##.#..#.#.#
#.##.#..#.#.#
#...##..####.
.....###...##
.####..#..#.#
..####..#.###
.#..###...#.#
#.#....#.#..#
...##.#..#.#.
...#.#..##..#
..#.#.#....##
##...#...#...
###..#...#...
..#.#.#....##

......#
####.##
##.#.#.
###.###
##.#..#
##.###.
##.#.#.
..###..
..###..
##.#.#.
##.####
##.#..#
###.###

####....###
##..####..#
.....##....
...#....#..
#..######..
.....##....
###.####.##
.###....###
.##.####.##
...#....#..
.##########
#..######..
....#..#...

#.##..###..##
.#.###.##.##.
#..##..###.##
#..##..###.##
.#.###.##.##.
#.##..###..##
###...######.
#.#.#.#.#####
..#....#.#...
#.##....#.#..
#.##....#.#..
..#....#.#...
#.#.#.#.##.##

.#..#...##...#..#
#####.######.####
.#..#.##..##.#..#
#.##.#.#..#.#.##.
#.##...#..#...##.
.####..####..####
#.##.########.##.
######.####.#####
#..#...#..#...#..
.....##.##.##....
#######.##.######

....#..#.
###.##.#.
###..##..
##.......
..##.##.#
##.......
##..#..#.
....####.
###..##..
##.......
....#..#.
....#..#.
..##....#

#....#.#..#
......##..#
#.##.#.#..#
..##..##..#
.####.#.##.
..##..#####
#....#.#..#
.####..#..#
.#..#..#..#
......#####
######..##.
#....######
######...#.
......#.##.
#....######

#..####..##.###..
..........######.
.##....##.##.#...
####..####.###.#.
.##....##.###.##.
####..####..#.#.#
#.######.#.###..#
###########.#####
...........#####.
##########.#...##
...........#.#.#.

..#...#...##...#.
#.##.##..####..##
..#..#.##.##.##.#
..#..#.##.##.##.#
#.##.##..####..##
..#...#...##...#.
###.#.....##.....
#.........##.....
######.#.####.#.#
.###.#.###..###.#
##.....#......#..
....##....##....#
.##.#############
.###.#.###..###.#
...#.##...##...##
.#..#..########..
#..#....#...##...

..#.#.#
...#.##
##.#..#
##.#...
...#.##
..#.#.#
####..#
##.#.#.
####..#
..#####
##..###

.####..#.....
......###.##.
.......#.#...
######.##.#..
........#.#..
##..##..#####
..##..###.#.#

.##.#...#
#.##...#.
##.....##
#....#.#.
.###..###
.#####..#
##..#....
..##..#..
..##..#..
##..#....
.#####..#
.###..###
#....#.#.
##.....##
#.##...#.
.##.....#
.##.....#

.#....#.###.#
#.####.#..#..
#.####.##..##
.#....#.##.#.
#.#..#.#.##..
#.####.###..#
###..###.##..
..#..#..###.#
##.##.##..###
.#.##.#...##.
.#.##.#...##.
##.##.##...##
..#..#..###.#
###..###.##..
#.####.###..#

###...##.
###.#.##.
#.###....
.#...#..#
#.#..#..#
####.####
.#.#.####
.#.#.....
.#..#.##.
#..#.#..#
....##..#

..##...##..
..#.#......
#..####..##
#...#######
.#...##..##
##.....##..
##.##......
##.########
.##.#######
..##.######
.##..#.##.#
...#.##..##
...#...##..

.##...##...
.##.######.
..####..###
####..##..#
#.##..##..#
.#.###..###
.#..##..##.
#.##..##..#
####..##..#

##.#....#
..#.####.
...#.##.#
..###..##
##.##..##
..#.#..#.
..#######
###.#..#.
#........

.####.#.##.##
######..##.##
.......##.###
..##...#.#.##
#....##...###
#....#...#...
######.#.....
..##..##..#..
.####.###....
#....###.#...
.#..#..#.#...
##..#######..
######.##.###
......###..##
..###..##..##
.####.#..##..
......#.###..

.#.##.##.
..#......
#..###..#
.###..##.
.##...##.
#..###..#
..#......
.#.##.##.
.#.######
.#.#.####
.#..#....

##...#.##.#.#..#.
.##.###.##.#####.
##...#.#.#..#.#..
#..##.##.#.###..#
.#..######.#..#.#
..#.##...#..#.###
..#.##...#..#.###
.#..######.#..#.#
#.###.##.#.###..#
#.###.##.#.###..#
.#..######.#..#.#
..#.##...#..#.###
..#.##...#..#.###
.#..######.#..#.#
#..##.##.#.###..#

.####.#
.####..
..#.#..
.#.#.##
##..###
#..###.
#..###.
##..###
.#.#.##

###....##
##......#
####..###
..#....#.
###....##
..######.
##......#
##......#
###.##.##
##.#.##.#
###.##.##
..######.
..#....#.

##..#.#
#.#....
...#.##
#.#.#..
#.#.#..
...#.##
#.#....

..#.#####...###
..#.#####...###
..#..#.##..###.
.##.#####.#..#.
##..##########.
##..#.##..#...#
.#...##.###..#.
..#.#.#.#.#.###
.#..#.#..#.#..#
.###.#.##..####
.###....#..#.##
..#..#####..#.#
..#..#####..#.#
.###....#..#.#.
.###.#.##..####

..#...####.
#.#..#.....
##....####.
#..###....#
##.###....#
..#.#......
..#.#......

#..#....#
....#..#.
....#..#.
.#.######
..#......
.#.##..##
#....##..
##.......
.##......
..##.##.#
##.#.##.#
#.#......
.##......
##.......
###..##..
..###..##
...##..##

#.####.##.#
.#.#..####.
#.#####..##
##..#.####.
.#####.##.#
.......##..
.......##..
.#####.##.#
##..#.####.
#.#####..##
.#.#..####.
#.####.##.#
####.##..##
##.#.#.....
...#.#.##.#

#..##.####.##..
#.#.##.##.##.#.
##.....##.....#
###....##....##
.#####.##.#####
..#.#......#.#.
.##..#.##.#..##
#...#.####.#...
##...##..###..#
.##.########.##
###.#.####.#.##
##.....##.....#
.###..#..#..###
###.##....##.##
.####.#..#.####
.#.#.#....#.#.#
.#.#.#....#.#.#

##..#..
..#....
..###.#
##...##
##.....
.....#.
..##...
...####
##.#.##
..#...#
..#...#
##...##
...####

.#####.##
.#####.##
..#.###..
#...##..#
###.#..##
####..###
####.##.#
.##.#..#.
#...#....
#...#....
.##.#..#.
####.##.#
####.####
###.#..##
#...##..#
..#.###..
.#####.##

####.######
##.##.####.
#..###....#
#..##.#..#.
#.####.##.#
#.####.##.#
#..##.#..#.
#..###....#
#..##.####.
####.######
..#.#######
##.##.####.
.#.##.#..#.
###..#....#
...###....#

######..#
.##...##.
#..#.####
...#.#..#
#....#.##
#....#.##
...#....#
#..#.####
.##...##.
######..#
######..#

##..##.#.#.#.
#####.#...#..
..#.##..#...#
.#....#....#.
...####.##.#.
####...##..#.
.##.#.##..#.#
.##.#.##..#.#
####...##..#.
...####.##.#.
.#..#.#....#.
..#.##..#...#
#####.#...#..
##..##.#.#.#.
#..##.....##.
###..#.#.####
###..#.#.####

...#####.
...####..
#.######.
#.##.##..
###.#..##
###...#.#
###...#.#
###.#..##
#.##.##..
#.######.
...####..

#####.##.######
......##.......
.###.#..#.###..
#############..
..#.#....#.#...
#.#.######.#.##
###.#.##.#.####

#...##.
.#.#..#
.##...#
.#.##.#
.###.##
#.#..#.
#.#..#.
.###.##
.#.##.#
###...#
.#.#..#
#...##.
#...##.
.#.#..#
###...#

....##.#..###..
....##.#..###..
..#..#......#..
#.###...#.#.#..
##.#.##.###..##
####..###..##.#
###....#.##....
.#####....##.##
.#..#..###.####

.##..##.##.
.##..##..#.
...##..#...
...###.###.
#.##.#.#..#
#.##.#.#..#
...###.###.
...##..#...
.##..##..#.
.##..##.##.
#.#..#.#...

..#..##.#.##..###
..####...#.....##
#...#....###.#.##
..#...#.#........
.#.####.####.##..
#..####.#.###.###
########.#..#.#..
####..#####....##
##.###.##...#..##
##.###.##...#..##
####..####.....##
########.#..#.#..
#..####.#.###.###

.##..###.####
.##..###.####
#.#####.##..#
...####.#.##.
..##.##..#...
.##...#.#####
..##.#..#####

.#..###...#..#.
....####.......
.#.##..##.#..#.
##.#.##.#.####.
####.##.#######
#.#......#.##.#
#.##....##.##.#
#.########.##.#
##........####.
.#.#....#.#..#.
...######......
##.##..##.####.
...#.##.#......
.##......##..##
##.#.##.#.####.

#....##..#...#..#
......##.##...##.
..##...##..#.....
#....#..#..######
#....#...#....##.
.......#....#####
.##.#...##.#.#..#
........#.#######
............##..#
##..###...##.####
..##...##.#..####
#.##.#.##.####..#
#######..###.####
#.##.#..#####.##.
#....#.....#..##.
#....###..##.#..#
......#.####..##.

....#.##.#...
#......#.#...
##...###.....
##...###.....
#....#.#.#...
....#.##.#...
.#######.....
.#..##.#.##.#
.##.##...##.#
.######.####.
.#.##....#.#.
.#.##....#.#.
.######.####.
.##.##...##.#
.#..##.#.##.#
.#######.....
....#.##.#...

#......##..##..
##....###..###.
..####..####..#
.#.##.#.####...
#.#..#.#.##.#.#
..####........#
#......######..

..#####..
###.##.##
###....##
##..##.##
###.#...#
##.######
###.#.###
..####..#
##..###..
####...##
..##..#.#
..##..#.#
###....##

##.###..###.###
.#....##....#..
.#....##....#..
##.###..###.###
.#..######..#.#
#.##..##..##.#.
#.#..#..#..#.#.
#.##.####.##.##
.#.###..#.#.#.#
#.#..#..#..#.#.
#..#.####.#..##

#.#.....####.
##..#..##..##
.##.##.#....#
.#.###.######
.##.....#..#.
###.##.......
#..#.........
.##.##...##..
.#...##......
.#.##.##.##.#
.####.##.##.#
.#...##......
.##.##...##..

.##.#.###
#.##.##..
..##.#.#.
..##.#.#.
#.##.##..
.##.#.###
..#......
#....###.
#....####

#..######
#...#####
######...
#...#.###
#####.###
##...####
#.##.....
###..##..
###.#####
####.##..
###..####
.##.###..
.##..#...
...#.#.##
..##..###

##..#....
......##.
...#..#..
#.#.#.##.
##.##..##
....#.##.
...##.##.
.######.#
..#####.#
..#####.#
.######.#
...##.##.
....#.##.

#..####..
.########
##.#..#.#
.###..###
####..###
###.##.##
.########
.########
#..####..

######..#..
###.#..###.
...####.###
##.####....
..##......#
##...#.#...
##...#.....

##..####..#
..###..##..
##.#....#.#
....####...
..#.####.#.
...######..
###.#..#.##
###......##
..#.#..#.#.
###.#..#.##
##.##..##.#
###.####.##
####....###
##...##...#
...#....#..

#######......##
#..#.##.####.##
....#.##.##.##.
###.##.#....#.#
##.#.....#.....
##.#.....#.....
###.##.#....#.#

####...#..#....
#.###..#.##..##
#.##...#.##..##
####...#..#....
##.#.#....#.###
....#...#.#....
#...##..##..#..
.#...#....###..
.##...##.......
#.#..##..###...
...#.##.#.###..

..#...#..#...
...#..###.#..
.###......#..
#..##.#...#..
#..##.#...#..
.###......#.#
...#..###.#..
..#...#..#...
..#.##.##....
.#..##..#...#
.#.#.......##
.#.#.......##
.#..##..#...#

.....##.##.##..
.##..##....##..
.##...######...
....#........#.
#..############
####.###..###..
####...####...#
.......####....
#####...##...##
#..#.###..###.#
#####.#....#.##

######..###.#
#.##.#..##..#
....####..###
#.#.....##...
#.#.....##...
....####..###
#.##.#..##..#

#.##..##.#.#.
#.####.#..##.
###..##.##.#.
.#..#.##.###.
...##.#.#.#.#
..##.##.#.#.#
#.#..#..#..##
#.#..#..#..##
..#..##.#.#.#
##.##..#..##.
....#..##...#
....#..##...#
##.##..#..##.
..#..##.#.#.#
#.#..#..#..##
#.#..#..#..##
..##.##.#.#.#

....#..
...###.
###.#..
####..#
##...##
####..#
...###.
##...#.
##..##.
##..##.
##...#.
...###.
####..#
##...##
####..#
###.#..
....##.

.........##.#..
###..##########
#.#..#.##.##...
.#....#.####.##
..####..##..###
.#....#..###.##
.#.##.#..######
#.####.##...###
##....##.#.###.

#####.##..####.
#####.##..###..
..#.#.#..#..###
###.##...#..###
##.###.#..#.###
...#..#...####.
##.......#...##
..#..##......##
..#.#.#.....###
####.#.#....###
..##.####..#...

#....#.##..#.
#....#.###.#.
#.##.#.#..##.
#....###..#.#
#.##.#.####.#
#######.###..
......####.##

####..###...###
##......##.##..
...###.##..#..#
...#.#.##..#..#
##......##.##..
####..###...###
####.###..###..
###..#.#...###.
###.#..##.#####

#.#..#...#.####
#####.###.#....
#####...#.##...
#..#...#####.##
#..#...###.##..
#..#...###.##..
#..#...#####.##
#####...#.#....
#####.###.#....
#.#..#...#.####
..#####...#....
##.#..##.##.###
##..#.#....####

#..#.######
##.##.#..#.
#.##...##..
#..##.#..#.
#.#.#..##..
#..##.####.
.#.###.##.#
####.##..##
#.#.###..##
##.#.#....#
.....#.##.#
#.#..#.##.#
#.#########
.#.#.######
.#.#.######
#.##.######
#.#..#.##.#

.#...#.##..##
##..#..#.#.#.
#.##.###.....
.#..####.#...
###...#..#..#
###..###..###
###..###..###
###...#..#..#
.#..####.#...
#.##.###.....
##..#..#.#.#.
.#...#.##...#
##...##.####.
.#..##...##.#
.#..##...##.#

....#.#.####.#..#
....#.#..##.##.##
#..#.##.#.#..#.#.
#..####.#.#..#.#.
....#.#..##.##.##
....#.#.####.#..#
#####..#.#.###...
....#.#..##.##.##
.##..####.##..#..
.##.####...##.#..
......##..###.#..
...........#.#..#
.##..##....###.##
#..##.##..#.....#
#..#.##.#..##.#..

.######.#
...##...#
.##..##.#
.#....#..
##.....##
##....##.
........#
..#..#..#
..#..#..#

.####.#....#.##
.####..#..##.##
.#..#.######.#.
..##..##..##..#
#....#.#..#.#..
##..##..##..##.
.####..####..##
#....###..###..
.#..#.#.##.#.#.
.#..#.#.##.#.#.
.####...##...##

#.#.##.##.##..#
...#..#.#.#.##.
#....#.#####.#.
..##.###.....#.
..###...#..##..
..###...#..##..
..##.###.....#.
#....#.#####.#.
...#..#.#.#.##.
#.####.##.##..#
##.#...###..###
.#########.....
##..####.#..##.
....###.#.##..#
#...##.....#.#.
#...##.....#.#.
....###.#.##..#

.#..##..###.#..#.
..##..#.#..##..##
.##.##...........
####..#.#.#.#..#.
.##..#.#.#.#.##.#
..##....##.######
.#.#.....##.#..#.
#.#.####.....##..
###........#....#
###........#....#
#.#.####.....##..
.#.#.....##.#..#.
#.##....##.######
.##..#.#.#.#.##.#
####..#.#.#.#..#.
.##.##...........
..##..#.#..##..##

.#.#..###
#...#....
#.####...
..#.#.#..
..##..#.#
.##.#.###
#....####
.#.###...
.#.......
...###...
...###...
.#.......
.#.###...

###......####.###
....##.####..#...
#.#.#.###..##.##.
..##.#.####..##..
..##.#.####..##..
#.#.#.###..##.##.
....##.####..#...
###......##.#.###
###......##.#.###
....##.####..#...
#.#.#.###..##.##.

###....
#....##
####...
..#####
.##..##
..#..##
#......
#.#.#..
.#...##
..##...
.#...##
##...##
.....##
#..##..
##.##..
.....##
##...##

#..##..#.####
#.#..#.#.####
#......#...#.
#......#.....
.#.##.#......
.##..##.#.##.
#..##..######
.######...##.
.........####
#########.##.
..#..#....##.
.#.##.#......
.........#..#

.....####......#.
#..#.####.#..#..#
......##......#.#
.....#..#.......#
#..#..##..#..#.##
#####....#####..#
.....####.......#
######..#######..
######..######.##
#####....#######.
...########....##
#..#.####.#..#.##
####.####.#######
.##.#.##.#.##...#
#..#......#..#...

.#..#......#.#.#.
##.###.###.###.##
#.##..#.##.###...
...###....#..####
###.##..#.##...##
###.##..#.##...##
...###....#..####
#.##..#.##.###...
#..###.###.###.##
.#..#......#.#.#.
###...####...##..
.##...#...##.#.##
##..#..#...###...
##..#..#...###...
.##...#...##.#.##
###...####...##..
.#..#......#.#.#.

...#..###.#...#..
...#....####.....
#.###..#.##.#.#..
.##.######.#.####
#.#.###....#...##
#..#...##.#..##..
#..#...##.#..##..
#.#.###....#...##
.##.######.#..###
#.###..#.##.#.#..
...#....####.....
...#..###.#...#..
.#..#..#..#...###

.......##..
####..###.#
#####.###.#
.......##..
####.######
#..#......#
.##...#.#.#
#..###..#.#
.##.#.#..##

#.####.#.##
#......#...
..####..#..
...##...##.
.######..##
.#.##.#.#..
###..###.##
.##..##..##
.#.##.#.#..

.#.#####.##
#.....#.#.#
#.....#.#.#
.#.#.###.##
..##.....##
#..#.#....#
###....#.#.
#.##.##....
#.##.##....

#..####...##...##
##.##.###.##.###.
#.##...########..
####...#.####.#..
..#..#.#.#..#.#.#
.#..#..#..##..#..
#...###.##..##.##
###......####....
#.#...###.##.###.
....###........##
...####........##

...##...##..#
..####..##..#
#......#..#..
..#..#..##..#
##....##..##.
.#.##.#....#.
##....##..##.
#......####..
..####......#
........##...
##....######.

##.###.##.###.###
#...########...##
.###........###..
.#..########..#..
#.#.######.#.#.##
#....######....##
#####..##..######
.#..#.####.#..#..
##.#........#.###
.#..########..#..
######.##.#######

..###...#.#
..###...#.#
#.##.#....#
####.##.###
##...##.#..
.#.#..#.###
######.##..
.##.#.#.#..
.#####.#.##
####.##...#
....#..##.#
##.#..####.
.###.##.#.#
.###.##.#.#
##.#...###.

##.####.####...
.#..##..#.##.##
.#.#..#.#.#..##
...#####...##..
#.######.#...##
.###..###..#.#.
..#.##.#..###.#
..#.##.#.....#.
...####......##
###.##.####.###
............##.
.............##
.............##

..##...#.##
.####....#.
#....##.#..
######....#
#.##.##.#..
......##..#
......##..#
#.##.##.#..
######....#
#....##.#..
.####....#.
..##...#.##
........#.#
.#..#......
.#####.###.
##..##.#..#
.#..#.#..##

...#....#.##.
##.##..###..#
##.##..###..#
...#....#.##.
.#.##.....##.
.##.#.#..####
..#.##....##.
#..#.#####..#
#.####..#....
..#####..####
.###.###.#...

..#...####..####.
##..#..###..###..
....#....####....
....#.#...##...#.
..#####.#.##.#.##
..###.#.##..##.#.
#..##....#..#....
..##.##.##..##.##
##..###.##..##.##
..#...##......##.
##...#..#....#..#
..#...#..#..#..#.
...#.####.##.####

##..#..
...#...
..#..#.
##.#...
##...#.
..#####
###..#.
....##.
...###.

.###..###..
#.#.##.#.##
.########..
#..#..#..##
#.#.##.#.##
..######...
.###..###..
##..##..###
####.######

##....#.##.##
#.....#...#..
#.....##..#..
##....#.##.##
#.....#......
#.#.....#.###
.#.#######.##
"

def format_input(input)
  puzzles = input.split("\n\n")
  puzzles.map do |puzzle|
    puzzle.split("\n").map{|line| line.split('')}
  end
end

def solve_puzzle(puzzle)
  (0..puzzle.size).each do |line_index|
    # puts "line index #{line_index}"
    all_matches = true
    (0..line_index).each do |line_index_offset|
      # puts "checking line_index_offset #{line_index_offset} so puzzle[#{line_index-line_index_offset}] and puzzle[#{line_index+1+line_index_offset}]"
      first_line = line_index-line_index_offset
      second_line = line_index+1+line_index_offset
      if first_line < 0 || second_line >= puzzle.size
        break
      elsif puzzle[first_line] != puzzle[second_line]
        all_matches = false
      end
    end
    return line_index+1 if all_matches && !(line_index+1 >= puzzle.size)
  end
  0
end

def solve(input)
  puzzles = format_input(input)

  # puzzles.each do |puzzle|
  #   puts puzzle.map{|line| line.join('')}.join("\n")
  #   puts "\n"
  #   puts puzzle.transpose.map{|line| line.join('')}.join("\n")
  #   puts "\n"

  #   puts "\n"

  # end

  row_sum = puzzles.sum do |puzzle|
    solution = solve_puzzle(puzzle)
    solution
  end

  col_sum = puzzles.sum do |puzzle|
    solution = solve_puzzle(puzzle.transpose)
    solution
  end

  col_sum + row_sum * 100
end

puts solve(my_input)